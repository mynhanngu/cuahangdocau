<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mỹ Nhân Ngư</title>
    <meta name="description" content="Mỹ Nhân Ngư - Mồi câu chất - Đam mê thật">
    <meta property="og:title" content="Mỹ Nhân Ngư" />
    <meta property="og:description" content="Mồi câu chất - Đam mê thật" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://mynhanngu.github.io/cuahangdocau/" />
    <meta property="og:image" content="https://mynhanngu.github.io/cuahangdocau/meirenyu.png" />
    <meta property="og:image:width" content="512" />
    <meta property="og:image:height" content="512" />
    <meta property="og:site_name" content="Mỹ Nhân Ngư" />
    <meta property="og:locale" content="vi_VN" />
    <link href="output.css" rel="stylesheet">
    <link rel="icon" href="meirenyu.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700;800&family=Lexend&display=swap" rel="stylesheet">
    <style>
        /* ================================================================ */
        /* === BƯỚC 1: ĐỊNH NGHĨA LẠI TOÀN BỘ BẢNG MÀU CỦA WEBSITE === */
        /* ================================================================ */
        :root {
            /* Màu chính sẽ là màu Đỏ Gốc */
            --primary-color: #E90000; 
            /* Màu phụ là màu Hồng Nhạt */
            --primary-pink: #FAA6FF;
            
            /* Tạo ra một dải màu Gradient để sử dụng lại nhiều lần */
            --primary-gradient: linear-gradient(125deg, var(--primary-color) 0%, var(--primary-pink) 100%);

            /* Màu Sáng: Dùng cho nền của nút phụ, màu hover,... */
            --primary-color-light: #FEE7FF;
            /* Màu Tối: Dùng khi hover chuột vào nút chính */
            --primary-color-dark: #C10000;

            /* Đồng bộ màu Danger với màu chính cho nhất quán */
            --danger-color: #E90000;
            --font-family: 'Be Vietnam Pro', sans-serif;
        }

        @font-face {
            font-family: 'FontThuPhapCuaToi';
            src: url('fonts/dl-thuphap-webfont.woff2') format('woff2'),
                 url('fonts/dl-thuphap-webfont.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-family);
            background-color: #f8fafc;
            color: #334155;
            font-size: 14px;
        }
        body.modal-open { overflow: hidden; }

        #shop-name {
            font-family: 'FontThuPhapCuaToi', cursive;
            font-weight: normal;
        }
        .line-clamp-2 { overflow: hidden; display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 2; }
        
        /* ================================================================ */
        /* === BƯỚC 2: TẠO HIỆU ỨNG CHỮ GRADIENT VÀ ÁP DỤNG === */
        /* ================================================================ */
        .gradient-text {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: inline-block;
        }
        
        /* Áp dụng hiệu ứng gradient cho các loại giá tiền */
        .product-card-price,
        #dynamic-price-display,
        #confirm-order-modal-content .font-bold.text-2xl {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); backdrop-filter: blur(8px); }
        .modal.active { display: flex; align-items: center; justify-content: center; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .modal-close-btn { position: absolute; top: 0.75rem; right: 1rem; font-size: 2.5rem; z-index: 1050; color: black; font-weight: 300; line-height: 1; cursor: pointer; transition: all 0.2s; background-color: transparent; padding: 0.5rem; text-shadow: 0 0 4px white, 0 0 6px white; }
        .modal-close-btn:hover { transform: scale(1.2); }

        #image-aspect-frame { position: relative; display: flex; align-items: center; justify-content: center; width: 100vw; height: 100vh; aspect-ratio: unset; }
        #fullscreen-image { width: 100%; height: 100%; object-fit: contain; border-radius: 0; transition: opacity 0.25s ease-in-out, transform 0.25s ease-in-out; }
        @media (min-width: 768px) { #image-aspect-frame { max-width: 90vw; max-height: 90vh; width: auto; height: auto; aspect-ratio: 4 / 3; } #fullscreen-image { border-radius: 0.5rem; } }
        @media (max-width: 767px) { #image-viewer-modal .modal-close-btn { display: none; } }
        
        .loading { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(255, 255, 255, 0.8); z-index: 2000; justify-content: center; align-items: center; }
        .loading.active { display: flex; }
        .spinner { border: 4px solid #e5e7eb; border-top: 4px solid var(--primary-color); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .notification { position: fixed; top: 80px; left: 50%; transform: translateX(-50%); padding: 12px 20px; border-radius: 8px; color: white; font-weight: 500; z-index: 1500; opacity: 0; transition: all 0.4s ease-in-out; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); }
        .notification.show { transform: translate(-50%, 10px); opacity: 1; }
        .notification.success { background-color: #10b981; }
        .notification.error { background-color: var(--danger-color); }
        
        .cart-badge { position: absolute; top: -4px; right: -8px; background-color: var(--danger-color); color: white; width: 18px; height: 18px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold; }
        
        #category-nav::-webkit-scrollbar { display: none; }
        #product-modal-content { max-width: 800px !important; width: 95%; max-height: 90vh; overflow-y: auto; }
        #alert-modal-content { z-index: 1100; }
        
        #footer-warning { white-space: pre-wrap; text-align: center; }
        
        .btn { padding: 0.6rem 1.25rem; border-radius: 0.5rem; font-weight: 600; transition: all 0.2s ease-in-out; text-align: center; cursor: pointer; border: none; }
        
        /* ================================================================ */
        /* === BƯỚC 3: "NÂNG CẤP" CÁC NÚT BẤM VỚI MÀU MỚI === */
        /* ================================================================ */
        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            background-size: 200% auto; /* Thêm hiệu ứng cho hover */
            transition: all 0.4s ease-in-out;
        }
        .btn-primary:hover {
            background-position: right center; /* Di chuyển gradient khi hover */
            box-shadow: 0 4px 15px rgba(233, 0, 0, 0.3);
        }
        
        .btn-secondary { background-color: var(--primary-color-light); color: var(--primary-color); }
        .btn-secondary:hover { background-color: #FED8FF; } /* Màu hồng nhạt hơn chút */
        .btn-danger { background-color: var(--danger-color); color: white; }
        .btn:disabled { background-color: #cbd5e1; color: #64748b; cursor: not-allowed; }
        
        .input-field { width: 100%; padding: 0.6rem 1rem; border: 1px solid #cbd5e1; border-radius: 0.5rem; transition: border-color 0.2s, box-shadow 0.2s; }
        .input-field:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 2px var(--primary-color-light); }
        .input-field.border-red-500 { border-color: #ef4444; }
        .input-field.border-red-500:focus { box-shadow: 0 0 0 2px #fecaca; }
        
        .contact-fab-group { position: fixed; bottom: 5rem; right: 1rem; z-index: 999; display: flex; flex-direction: column; gap: 0.75rem; }
        .contact-fab { width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); transition: transform 0.2s ease; }
        .contact-fab:hover { transform: scale(1.1); }
        .fab-phone { background-color: #25D366; }
        .fab-zalo { background-color: #E0F0FF; }
        
        .peer:disabled + div { cursor: not-allowed; opacity: 0.5; }
        
        .thumbnail-image { cursor: pointer; border: 2px solid transparent; transition: border-color 0.2s; }
        .thumbnail-image.active { border-color: var(--primary-color); }
        
        input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }
        
        #products-grid { gap: 0.5rem; }
        @media (min-width: 768px) { #products-grid { gap: 1rem; } }
        .product-card { background-color: white; border: 1px solid #f0f0f0; border-radius: 0.25rem; overflow: hidden; display: flex; flex-direction: column; transition: box-shadow 0.2s ease-in-out, transform 0.2s ease-in-out; }
        .product-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.1); transform: translateY(-3px); }
        .product-card-image { width: 100%; aspect-ratio: 1 / 1; object-fit: cover; }
        .product-card-info { padding: 0.5rem; display: flex; flex-direction: column; flex-grow: 1; }
        .product-card-name { font-size: 0.8rem; font-weight: 500; line-height: 1.4; color: #1f2937; height: 40px; }
        .product-card-footer { margin-top: auto; padding-top: 0.25rem; }
        
        /* === CSS CHO TRẠNG THÁI (ĐÃ CẬP NHẬT MÀU) === */
        .product-status-unavailable { font-size: 0.75rem; font-weight: 600; color: var(--danger-color); }
        .product-status-note { font-size: 0.75rem; font-weight: 600; color: #d97706; }
        /* === KẾT THÚC CSS TRẠNG THÁI === */

        .gallery-nav-btn { position: absolute; top: 50%; transform: translateY(-50%); background-color: rgba(255, 255, 255, 0.7); border-radius: 50%; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease; border: 1px solid #eee; }
        .gallery-nav-btn:hover { background-color: white; transform: translateY(-50%) scale(1.1); }
        .gallery-nav-btn.prev { left: 1rem; } .gallery-nav-btn.next { right: 1rem; }
        @media (min-width: 768px) { .gallery-nav-btn.prev { left: 1.5rem; } .gallery-nav-btn.next { right: 1.5rem; } }
        .gallery-nav-btn svg { width: 20px; height: 20px; color: #333; }
        .gallery-counter { position: absolute; bottom: 0.75rem; left: 50%; transform: translateX(-50%); background-color: rgba(0, 0, 0, 0.5); color: white; padding: 2px 10px; border-radius: 12px; font-size: 12px; font-weight: 500; }
        
        #welcome-modal-content { width: 90%; max-width: 420px; margin: auto; padding: 1.5rem; }
        @media (max-width: 480px) { #welcome-modal-content { padding: 1.25rem; } }
        #footer-warning img, #welcome-title img, #welcome-message img { height: 1.2em; width: auto; display: inline-block; vertical-align: middle; margin: 0 0.15em; }
        
        footer { will-change: transform; transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1); }
        footer.footer-hidden { transform: translateY(100%); }

        .lazy { opacity: 0; transition: opacity 0.5s ease-in-out; }
        .lazy.loaded { opacity: 1; }

        .order-status { display: inline-flex; align-items: center; justify-content: center; padding: 2px 16px; height: 28px; min-width: 140px; border-radius: 9999px; font-size: 12px; font-weight: 600; white-space: nowrap; }
        .status-cho-xac-nhan, .status-default { background-color: #f3f4f6; color: #4b5563; border: 1px solid #e5e7eb; }
        .status-da-xac-nhan { background-color: #dcfce7; color: #166534; }
        .status-khong-nghe-may { background-color: #dbeafe; color: #1e40af; }
        .status-rui-ro-cao { background-color: #fef3c7; color: #92400e; }
        .status-huy { background-color: #fee2e2; color: #991b1b; }
        
        #lookup-order-results .order-item { background-color: white; border-radius: 0.75rem; border: 1px solid #e5e7eb; padding: 1.25rem; margin-bottom: 1rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        #lookup-order-results .order-products { white-space: pre-wrap; font-size: 13px; line-height: 1.5; background-color: #f9fafb; padding: 0.75rem; border-radius: 6px; max-height: 150px; overflow-y: auto; border: 1px solid #f3f4f6; }
        .order-info-block { display: flex; justify-content: space-between; align-items: flex-start; gap: 1rem; }
        
        .order-details-grid { display: grid; grid-template-columns: auto 1fr; gap: 8px 16px; align-items: center; }
        .order-details-grid .order-label { font-weight: 700; color: #4b5563; white-space: nowrap; }
        
        .cart-item-invalid { background-color: #fff1f2; border: 1px solid #ffdde0; border-radius: 0.5rem; padding: 2px 4px; }
        .cart-item-invalid-msg { font-size: 11px; font-weight: 600; color: #be123c; }
        .brand-color { color: var(--primary-pink); font-weight: 600; }
    </style>
</head>

<body>
    <div id="loading-spinner" class="loading">
        <div class="spinner"></div>
    </div>
    <div id="notification" class="notification"></div>
    
    <div id="main-content-wrapper">
        <header class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-200">
            <div class="container mx-auto pb-3">
                <div class="h-16 md:h-20 flex items-center justify-between px-4 pt-2 mb-2">
                    <div class="w-10"></div> 
                    <div class="text-center cursor-pointer" onclick="window.location.reload()">
                        <!-- ================================================================ -->
                        <!-- === BƯỚC 4: SỬA LẠI HEADER ĐỂ DÙNG HIỆU ỨNG MỚI === -->
                        <!-- ================================================================ -->
                        <h1 id="shop-name" class="text-2xl md:text-3xl gradient-text">Đang tải...</h1>
                        <p id="shop-slogan" class="text-xs text-slate-500 font-medium tracking-wide"></p>
                    </div>
                    <div class="flex items-center">
                        <button id="lookup-order-button" onclick="showLookupView()" title="Tra cứu đơn hàng" class="relative w-10 h-10 flex items-center justify-center rounded-full hover:bg-slate-100 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 5h.01M12 12h.01M15 12h.01M9 15h.01M12 15h.01M15 15h.01" />
                            </svg>
                        </button>
                        <button id="cart-button" onclick="showCartModal()" title="Giỏ hàng" class="relative w-10 h-10 flex items-center justify-center rounded-full hover:bg-slate-100 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                            </svg>
                            <span id="cart-badge" class="cart-badge hidden">0</span>
                        </button>
                    </div>
                </div>
                <div id="category-nav"></div>
            </div>
        </header>
        
        <main class="container mx-auto px-4 py-6 pb-28">
            <!-- ... (Nội dung main không thay đổi) ... -->
        </main>
        
        <div class="contact-fab-group">
            <!-- ... (Nội dung fab không thay đổi) ... -->
        </div>
        
        <footer class="fixed bottom-0 left-0 right-0 z-40 bg-white/80 backdrop-blur-sm p-2 text-center border-t border-slate-200">
            <p id="footer-warning" class="text-xs text-slate-500 font-medium mb-1"></p>
            <p id="footer-copyright" class="text-xs text-slate-500"></p>
        </footer>
    </div>
    
    <!-- ... (Toàn bộ các thẻ modal không thay đổi) ... -->

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // ... (Phần đầu script không thay đổi) ...

            // === BƯỚC 5: SỬA LẠI MÀU NÚT CATEGORY ĐANG ACTIVE TRONG SCRIPT ===
            function renderCategories() {
                const nav = document.getElementById('category-nav');
                const numCategories = state.categories.length;
                nav.className = 'flex items-center justify-center overflow-x-auto pt-2 pb-4 px-4 md:px-0 gap-3';
                nav.innerHTML = state.categories.map(cat => {
                    // Đổi class màu nền thành class dùng gradient
                    const activeClasses = 'btn-primary text-white shadow-lg'; // Dùng lại class nút chính đã được nâng cấp
                    const inactiveClasses = 'bg-white text-slate-800 hover:bg-slate-100 border border-slate-200 shadow-sm';
                    let buttonClasses = 'px-5 py-2.5 rounded-full text-base font-semibold transition-all duration-200 ease-in-out transform hover:-translate-y-px whitespace-nowrap';
                    if (numCategories > 0 && numCategories <= 4) buttonClasses += ' flex-grow text-center';
                    buttonClasses += state.activeCategory === cat ? ` ${activeClasses}` : ` ${inactiveClasses}`;
                    return `<button onclick="filterByCategory('${cat}')" class="${buttonClasses}">${cat}</button>`;
                }).join('');
            }
            
            // ... (TOÀN BỘ PHẦN SCRIPT CÒN LẠI GIỮ NGUYÊN) ...

            // ---- GHI CHÚ: SỬA LẠI HÀM renderShopInfo ĐỂ CÓ THỂ DÙNG <span> TRONG TÊN SHOP VÀ SLOGAN ----
            function renderShopInfo(info) {
                document.title = info.tenCuaHang || 'Cửa Hàng';
                document.getElementById('shop-name').innerHTML = info.tenCuaHang;
                document.getElementById('shop-slogan').innerHTML = info.slogan;
                document.getElementById('fab-phone-link').href = `tel:${info.sdt}`;
                document.getElementById('fab-zalo-link').href = info.zalo;
                document.getElementById('footer-warning').innerHTML = (info.canhBaoFooter || '').replace(/\n/g, '<br>');
                document.getElementById('footer-copyright').innerHTML = info.banQuyen || '';

                if (info.noiDungPopup || info.canhBaoPopup) {
                    const titleEl = document.getElementById('welcome-title');
                    const messageEl = document.getElementById('welcome-message');
                    if (info.tieuDePopup && info.tieuDePopup.trim() !== '') {
                        titleEl.innerHTML = info.tieuDePopup.replace(/\n/g, '<br>');
                        titleEl.style.display = 'block';
                    } else {
                        titleEl.style.display = 'none';
                    }
                    let finalMessageHTML = '';
                    if (info.noiDungPopup && info.noiDungPopup.trim() !== '') finalMessageHTML += `<div>${info.noiDungPopup.replace(/\n/g, '<br>')}</div>`;
                    if (info.canhBaoPopup && info.canhBaoPopup.trim() !== '') {
                        finalMessageHTML += `<div class="mt-3 font-bold italic text-red-600">${info.canhBaoPopup.replace(/\n/g, '<br>')}</div>`;
                    }
                    messageEl.innerHTML = finalMessageHTML;
                    if (finalMessageHTML.trim() !== '') triggerWelcomePopup();
                }
            }

            // ... (Dán toàn bộ phần script còn lại của bạn vào đây) ...
            
        });
    </script>
</body>
</html>